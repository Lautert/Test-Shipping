/*! Application - v0.0.0 - 2019-12-07 */
$(document).ready(function(){var n=[{id:1,name:"Apple",price:20},{id:2,name:"Banana",price:10},{id:3,name:"Orange",price:30}],e=$(".content-product-list ul");n.map(function(n,t){var i=e.find(".model").clone();i.removeClass("model"),i.find('input[type="hidden"]').val(n.id),i.find(".name").text(n.name),i.find(".unit").text("$ "+n.price),i.find(".total").text("$ 0"),i.find(".amount-component input").attr("name","amount["+n.id+"]"),i.find(".amount").AmountComponent(),e.append(i)});var t=[{id:1,name:"A",benefit:{subtotal:{reduce:{percentage:30}}}},{id:2,name:"FOO",benefit:{total:{reduce:{fixed:100}}}},{id:3,name:"C",benefit:{shipping:{value:{fixed:0}}},conditions:{min:300.5}}],i=[{code:"111",id:1},{code:"222",id:2},{code:"333",id:3}];new(function(e){function o(n){n=e(n);this.elem={cart:n,productList:n.find(".content-product-list"),couponList:n.find(".content-coupons-list ul"),subtotal:n.find(".subtotal"),shipping:n.find(".shipping"),total:n.find(".total"),couponApply:n.find(".coupon-apply")},this.products={},this.coupons={},this.subtotal=0,this.shipping=0,this.total=0,this.events()}return o.prototype={events:function(){var o=this;o.elem.productList.find(".product").on("change",'input[type="text"]',function(){var t=e(this).parents(".product:eq(0)"),i=t.find('input[type="hidden"]').val(),p=parseInt(t.find('input[type="text"]').val()),d=n.filter((n,e)=>n.id==i)[0].price,c=parseFloat(p*d);c>0?o.products[i]=c:delete o.products[i],t.find(".total").text("$ "+c),o.invoice()}),o.elem.couponApply.on("click","button",function(){var n=o.elem.couponApply.find('input[type="text"]').val();if(n.length>0){var e=i.filter((e,t)=>e.code==n);if(e.length>0){var p=e[0].id;if(0==Object.keys(o.coupons).filter((n,e)=>n==p).length){n=t.filter((n,e)=>n.id==p)[0],o.coupons[n.id]=!0;var d=o.elem.couponList.find(".model").clone();d.removeClass("model"),d.find('input[type="hidden"]').val(n.id),d.find(".name").text("Coupon "+n.name),o.elem.couponList.append(d),o.invoice()}else console.log("coupon already used")}else console.log("coupon not valid")}}),o.elem.couponList.on("click",".coupon-remove",function(){var n=e(this).parents(".coupon:eq(0)"),t=n.find('input[type="hidden"]').val();delete o.coupons[t],n.remove(),o.invoice()})},invoice:function(){console.log("change invoice")}},o}(jQuery))(".form-content-cart")});